function drawImage(t,i,a,e){return this.image=t,this.canvas=e,this.posX=i,this.posY=a,this.context=e.getContext("2d"),this.context.drawImage(t,i,a),this.imageData=this.context.getImageData(i,a,t.width,t.height),window===this&&null!=t&&null!=e&&isNumber(i,a)?new drawImage(this.image,this.posX,this.posY,this.canvas):void 0}function isNumber(){for(var t=0;t<arguments.length;t++)if("number"!=typeof arguments[t])return!1;return!0}function allPositive(){for(var t=0;t<arguments.length;t++)if(arguments[t]<0)return!1;return!0}drawImage.prototype={toGrayScale:function(){for(var t=this.imageData.data,i=0;i<t.length;i+=4){var a=(t[i]+t[i+1]+t[i+2])/3;t[i]=a,t[i+1]=a,t[i+2]=a}return this.context.putImageData(this.imageData,this.posX,this.posY),this},scaleRGB:function(t,i,a,e){if(isNumber(t,i,a,e)&&allPositive(t,i,a,e)){for(var s=this.imageData.data,h=0;h<s.length;h+=4)s[h]=s[h]*t<=255?s[h]*t:255,s[h+1]=s[h+1]*i<=255?s[h+1]*i:255,s[h+2]=s[h+2]*a<=255?s[h+2]*a:255,s[h+3]=s[h+3]*e<=255?s[h+3]*e:255;this.context.putImageData(this.imageData,this.posX,this.posY)}return this},invertColors:function(){for(var t=this.imageData.data,i=0;i<t.length;i+=4)t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2];return this.context.putImageData(this.imageData,this.posX,this.posY),this},flip:function(t,i){this.context.save(),this.context.scale(t?-1:1,i?-1:1),this.context.drawImage(this.image,t?-this.image.width:0,i?-this.image.height:0),this.context.restore()}};